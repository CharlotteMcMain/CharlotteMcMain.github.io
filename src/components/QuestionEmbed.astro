---
import { getEntry } from "astro:content";
import MultipleChoiceQuestion from "./MultipleChoiceQuestions.tsx";
import LongAnswerQuestion from "./LongAnswerQuestions.tsx";

type Props = {
  slug: string; // path relative to src/content/questions (no .mdx)
};

const { slug } = Astro.props;

// Load the question entry
const entry = await getEntry("questions", slug);
if (!entry) {
  throw new Error(`Question not found: questions/${slug}`);
}

// Render markdown body (explanation, notes, etc.)
const { Content } = await entry.render();
const d = entry.data;
---

{d.type === "mcq" ? (
  <MultipleChoiceQuestion
    client:load
    id={d.questionId}
    stem={d.stem}
    options={d.options}
    correctId={d.correctId}
    marks={d.marks}
    meta={`${d.board} 路 ${d.session} 路 ${d.code}`}
  >
    <Content />
  </MultipleChoiceQuestion>
) : (
  <LongAnswerQuestion
    client:load
    id={d.questionId}
    stem={d.stem}
    parts={d.parts}
    totalMarks={d.marks}
    meta={`${d.board} 路 ${d.session} 路 ${d.code}`}
  >
    <Content />
  </LongAnswerQuestion>
)}